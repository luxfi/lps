---
lp: 313
title: Warp Messaging Precompile
description: Native precompile for cross-chain message verification and BLS signature aggregation
author: Lux Core Team (@luxfi)
discussions-to: https://github.com/luxfi/lps/discussions
status: Draft
type: Standards Track
category: Core
created: 2025-11-14
requires: 22
activation:
  flag: lp313-warp-precompile
  hfName: "Teleport"
  activationHeight: "0"
---

## Abstract

This LP specifies the Warp Messaging precompile at address `0x0200000000000000000000000000000000000008`, which enables cross-chain message verification using BLS signature aggregation. The precompile verifies validator-signed messages for secure inter-chain communication, asset transfers, and state synchronization across Lux chains and subnets.

## Motivation

Cross-chain interoperability requires secure message passing with cryptographic proof that validators have attested to message validity. Warp provides:

1. **BLS Signature Aggregation**: Combine multiple validator signatures into one
2. **Threshold Verification**: Ensure sufficient validator stake has signed
3. **Cross-Chain Assets**: Enable native token transfers between chains
4. **State Proofs**: Verify state from other chains
5. **Atomic Operations**: Coordinate multi-chain transactions

## Specification

### Precompile Address
```
0x0200000000000000000000000000000000000008
```

### Input Format

| Offset | Length | Field | Description |
|--------|--------|-------|-------------|
| 0      | 32     | `messageHash` | Keccak256 hash of the message |
| 32     | 32     | `netID` | Source network/subnet ID |
| 64     | 96     | `aggregateSignature` | BLS aggregate signature |
| 160    | 32     | `bitsetLength` | Number of validators in bitset |
| 192    | variable | `bitset` | Packed bitset of signers |

### Output Format
- `0x...0001` - Message valid (threshold met)
- `0x...0000` - Message invalid

### Gas Cost
```
gas = BASE_COST + (numSigners * SIGNER_COST)

Where:
  BASE_COST = 50,000 gas
  SIGNER_COST = 1,000 gas per validator
```

## Security Considerations

- **Stake Threshold**: Requires 67% of stake weight
- **BLS Security**: 128-bit security level
- **Rogue Key Protection**: Uses proof of possession
- **Replay Protection**: Network ID prevents cross-chain replay

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).